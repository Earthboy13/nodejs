<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/forms.css">
<link rel="stylesheet" href="/css/auth.css">
</head>

<body>
    <%- include('../includes/nav.ejs') %>
    <main>
        <% if (errorMessage.length > 0) { %>
        <div class="user-message user-message--error"><%=errorMessage[0]%></div>
        <% } %>
        <form class="login-form" action="<%= path === '/login' ? '/login' : '/sign-up'%>" method="POST">
            <% if (path === '/login') { %>
            <div class="form-control">
                <label for="username">Username/E-mail</label>
                <input type="text" name="username" id="username" value="<%=oldinput.username%>">
            </div>
            <div class="form-control">
                <label for="password">Password</label>
                <input type="password" name="password" id="password" value="<%=oldinput.password%>">
            </div>
            <% } else { %>
            <div class="form-control">
                <label for="username">Username</label>
                <input class="<%= errorParams.find(p => p === 'username') ? 'invalid' : ''%>" type="text" name="username" id="username" value="<%=oldinput.username%>">
            </div>
            <div class="form-control">
                <label for="email">E-mail</label>
                <input class="<%= errorParams.find(p => p === 'email') ? 'invalid' : ''%>" type="email" name="email" id="email" value="<%=oldinput.email%>">
            </div>
            <div class="form-control">
                <label for="password">Password</label>
                <input class="<%= errorParams.find(p => p === 'password') ? 'invalid' : ''%>" type="password" name="password" id="password" value="<%=oldinput.password%>">
            </div>
            <div class="form-control">
                <label for="cpassword">Confirm Password</label>
                <input class="<%= errorParams.find(p => p === 'cpassword') ? 'invalid' : ''%>" type="password" name="cpassword" id="cpassword" value="<%=oldinput.cpassword%>">
            </div>
            <div class="form-control">
                <label for="first_name">First Name</label>
                <input class="<%= errorParams.find(p => p === 'first_name') ? 'invalid' : ''%>" type="text" name="first_name" id="first_name" value="<%=oldinput.first_name%>">
            </div>
            <div class="form-control">
                <label for="last_name">Last Name</label>
                <input class="<%= errorParams.find(p => p === 'last_name') ? 'invalid' : ''%>" type="text" name="last_name" id="last_name" value="<%=oldinput.last_name%>">
            </div>
            <div class="form-control">
                <label for="dob">Date Of Birth(DOB)</label>
                <input class="<%= errorParams.find(p => p === 'dob') ? 'invalid' : ''%>" type="date" name="dob" id="dob" value="<%=oldinput.dob%>">
            </div>
            <% } %>
            <input type="hidden" name="_csrf" value="<%=csrfToken%>">
            <button type=submit><% if (path === '/login') { %>Login<% } else { %>Sign-up<% } %></button>
        </form>
        <% if (path === '/login') { %>
            <div class="centered" >
                <a href="/reset" style="text-decoration: none;color: black;">
                   Forgot password?
                </a>
            </div>
        <% } %>
    </main>
    <%- include('../includes/end.ejs') %>